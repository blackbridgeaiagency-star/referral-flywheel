# ========================================
# REFERRAL FLYWHEEL - ENVIRONMENT VARIABLES
# ========================================
# Instructions:
# 1. Copy this file to .env.local for local development
# 2. Fill in your actual values (check .secrets.vault for real values)
# 3. NEVER commit .env.local or .secrets.vault to git
# ========================================

# ========================================
# DATABASE (Supabase/PostgreSQL)
# ========================================
# Use pooled connection for serverless (port 6543)
# Format: postgresql://postgres:[PASSWORD]@db.[PROJECT_ID].supabase.co:6543/postgres?pgbouncer=true
DATABASE_URL="postgresql://postgres:YOUR_PASSWORD_HERE@db.YOUR_PROJECT_ID.supabase.co:6543/postgres?pgbouncer=true&connection_limit=1"

# Optional: Direct connection for migrations (port 5432)
# DATABASE_URL_DIRECT="postgresql://postgres:YOUR_PASSWORD_HERE@db.YOUR_PROJECT_ID.supabase.co:5432/postgres"

# ========================================
# WHOP INTEGRATION
# ========================================
# Get these from https://whop.com/dashboard/developer

# API Key for server-side operations (keep secret!)
WHOP_API_KEY="YOUR_WHOP_API_KEY_HERE"

# Webhook secret for verifying webhook signatures
WHOP_WEBHOOK_SECRET="YOUR_WHOP_WEBHOOK_SECRET_HERE"

# Public identifiers (safe to expose in client-side code)
NEXT_PUBLIC_WHOP_APP_ID="app_YOUR_APP_ID_HERE"
NEXT_PUBLIC_WHOP_COMPANY_ID="biz_YOUR_COMPANY_ID_HERE"

# Agent user ID for messaging (Required for Whop messaging)
NEXT_PUBLIC_WHOP_AGENT_USER_ID="user_YOUR_AGENT_ID"

# ========================================
# APPLICATION
# ========================================
# Your deployed app URL (no trailing slash)
# Local development: http://localhost:3000
# Production: https://yourdomain.com or https://yourapp.vercel.app
NEXT_PUBLIC_APP_URL="http://localhost:3000"

# ========================================
# SECURITY (REQUIRED for Production)
# ========================================
# Admin API key for protected endpoints
# Generate with: openssl rand -hex 32
ADMIN_API_KEY="GENERATE_RANDOM_64_CHAR_HEX_STRING"

# Random string for protecting cron endpoints
# Generate with: openssl rand -hex 32
CRON_SECRET="GENERATE_RANDOM_64_CHAR_HEX_STRING"

# Export API key for CSV downloads
# Generate with: openssl rand -hex 32
EXPORT_API_KEY="GENERATE_RANDOM_64_CHAR_HEX_STRING"

# Session secret for JWT signing
# Generate with: openssl rand -base64 32
SESSION_SECRET="GENERATE_RANDOM_BASE64_STRING"

# Enable enhanced security features
ENABLE_API_VERIFICATION="true"
ENABLE_SESSION_CACHE="true"
SESSION_MAX_AGE="86400"

# Salt for hashing IP addresses (privacy compliance)
# Generate with: openssl rand -hex 16
# IP_HASH_SALT="GENERATE_RANDOM_16_CHAR_HEX_STRING"

# ========================================
# MONITORING & ANALYTICS (Optional)
# ========================================
# Sentry for error tracking
# SENTRY_DSN="https://YOUR_KEY@sentry.io/YOUR_PROJECT"

# PostHog for analytics
# NEXT_PUBLIC_POSTHOG_KEY="YOUR_POSTHOG_KEY"
# NEXT_PUBLIC_POSTHOG_HOST="https://app.posthog.com"

# ========================================
# STRIPE (Revenue Share Invoicing)
# ========================================
# Get these from https://dashboard.stripe.com/apikeys
# Use test keys (sk_test_...) for development, live keys (sk_live_...) for production
STRIPE_SECRET_KEY="sk_test_YOUR_STRIPE_SECRET_KEY_HERE"

# Webhook signing secret from Stripe Dashboard → Developers → Webhooks
# Format: whsec_...
STRIPE_WEBHOOK_SECRET="whsec_YOUR_STRIPE_WEBHOOK_SECRET_HERE"

# ========================================
# EMAIL (Optional - for production)
# ========================================
# SMTP configuration for sending emails
# SMTP_HOST="smtp.sendgrid.net"
# SMTP_PORT="587"
# SMTP_USER="apikey"
# SMTP_PASSWORD="YOUR_SENDGRID_API_KEY"
# SMTP_FROM="noreply@yourdomain.com"

# ========================================
# DEVELOPMENT ONLY
# ========================================
# Environment mode
NODE_ENV="development"

# Enable debug logging (optional)
# DEBUG="referral:*"

# ========================================
# IMPORTANT REMINDERS
# ========================================
# ⚠️ NEVER commit real secrets to git
# ⚠️ Use .env.local for local development
# ⚠️ Use Vercel Environment Variables for production
# ⚠️ Check .secrets.vault for your actual secret values
# ⚠️ Rotate keys regularly for security
# ========================================